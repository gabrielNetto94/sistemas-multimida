<!DOCTYPE HTML>
<html>
	<head>		
		<meta charset="utf-8">
		<link rel = "stylesheet" type = "text/css" href = "style.css" />
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	</head>
  <body>
  	<script type="text/javascript" src="js.js"></script>
	<canvas id="myCanvas" width="700" height="450"></canvas><br>
	
	<h3>Cor pincel</h3>
		<button onclick="changeColor('#ff0000')" class="btn btn-danger">Red</button>
		<button onclick="changeColor('#00ff00')" class="btn btn-success">Green</button>
		<button onclick="changeColor('#0000ff')" class="btn btn-primary">Blue</button>
		<button onclick="useBrush()" class="btn btn-dark">Pincel</button>
		<button onclick="useEraser()">Borracha</button>

	<h3>Tamanho traço</h3>
		<input id="slider" type="range" min="1" max="50" value="25" class="slider" id="myRange">
		<output id="output"></output>
		<button onclick="changeLineSize()">Selecionar</button>
	
	<h3>Desenhar Linhas</h3>
		<button onclick="drawLine()" class="btn btn-dark">Linha</button>
		
	<h3>Cor de fundo canvas</h3>
		<input id="inputColor" type="color" name="favcolor" value="#ff0000">
		<button onclick="changeBackgroundColorCanvas()" class="btn btn-dark">background</button>

	<h3>Formas Geométricas</h3>
		<form id="radioGroup">
			<input type="radio" name="radioItem" id="square" value="square"><label>Quadrado</label><BR>
			<input type="radio" name="radioItem" id="circle" value="circle"><label>Circulo</label><BR>
			<input type="radio" name="radioItem" id="rectangle" value="rectangle"><label>Retângulo</label>
		</form>
	
  </body>
  <script type="text/javascript">
	/*
	OK a) desenho livre, com troca do tamanho do traço 
	b) desenho de pelo menos 3 formas geométricas, podendo escolher a cor da linha e de preenchimento e a largura da linha
	c) desenho de linhas, podendo escolher a cor da linha e a largura da mesma
 	OK d) troca de cores, tanto para o desenho quanto para o fundo
	OK e) borracha
	*/

        
	//BEGIN TEST
	var square = false;
	var circle = false;

	//END TEST

	var canvas = document.getElementById("myCanvas");
	var ctx = canvas.getContext("2d");
	var slider = document.getElementById("#slider");
	var form = document.getElementById("radioGroup");
		
	var isPressed = false;
	
	var eraser = {
		colorEraser: "#ffffff",
		use: false
	}		
	
	//setup canvas
	ctx.lineCap  = "round";
	var startPointX = 0;
	var startPointY = 0;

	canvas.onmousedown = function(event){
		isPressed = true;
		
		switch(form.elements["radioItem"].value) {//which option is selected
			case "square":
				square = document.getElementById("square").checked;
				startPointX = event.offsetX;
				startPointY = event.offsetY;
				ctx.beginPath();
				ctx.moveTo(startPointX, startPointY);
			break;
			
			case "circle":
				alert("circle");
			break;
			
			case "rectangle":
				alert("rectangle");
			break;

			default:
				ctx.moveTo(event.offsetX, event.offsetY);
			}
	}
	
	canvas.onmouseup = function (event){
		isPressed = false;
		
		switch (form.elements["radioItem"].value) {//which option is selected
			case "square":
				var width = event.offsetX - startPointX;
				var height = event.offsetY - startPointY;
				ctx.strokeRect(startPointX, startPointY, width, height);
				ctx.beginPath();
			break;
			
			case "circle":
				alert("circle");
			break;
			
			case "rectangle":
				alert("rectangle");
			break;

			default:
				ctx.moveTo(event.offsetX, event.offsetY);
			}
		
		
		/*
		if(square){ 
			var width = event.offsetX - startPointX;
			var height = event.offsetY - startPointY;
			ctx.strokeRect(startPointX, startPointY, width, height);
			ctx.beginPath();
		}
		if(circle){
			ctx.arc(100, 100, 50, 0, Math.PI * 2, true); // Círculo exterior
		}*/
	
	}

	canvas.onmousemove = function(event){
		/*
		switch (form.elements["radioItem"].value) {//which option is selected
			case "square":
				var width = event.offsetX - startPointX;
				var height = event.offsetY - startPointY;
				ctx.strokeRect(startPointX, startPointY, width, height);
				ctx.beginPath();
			break;
			
			case "circle":
				alert("circle");
			break;
			
			case "rectangle":
				alert("rectangle");
			break;

			default:
				ctx.moveTo(event.offsetX, event.offsetY);
			}
		*/
		if(square){
				//var width = event.offsetX - startPointX;
				//var height = event.offsetY - startPointY;
				//ctx.strokeRect(startPointX, startPointY, width, height);
			}else{
			if(isPressed){				
				ctx.lineTo(event.offsetX, event.offsetY);
				ctx.stroke();
			}
		}
	}

	function changeBackgroundColorCanvas(){
		var colorInput = document.getElementById("inputColor").value;
		canvas.style.backgroundColor = colorInput;
		eraser.colorEraser = colorInput;
		//ctx.strokeStyle = colorEraser;//change color eraser
	}

	function changeLineSize() {
		var val = document.getElementById("slider").value //gets the oninput value
		document.getElementById('output').innerHTML = val //displays this value to the html page
	   	ctx.lineWidth = val;
	}

	function changeColor(color){	
		ctx.strokeStyle = color;
	}

	function useEraser(){
		
		ctx.strokeStyle = eraser.colorEraser;
	}

	function useBrush(){
		ctx.strokeStyle = "#000000";
	}

  </script>
</html> 