<!DOCTYPE HTML>
<html>
	<head>		
		<meta charset="utf-8">
		<link rel = "stylesheet" type = "text/css" href = "style.css" />
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	</head>
  <body>
  	<script type="text/javascript" src="js.js"></script>
	<canvas id="myCanvas" width="700" height="450"></canvas><br>
	
	<h3>Canvas</h3>
		<form id="radioGroup">
			<input type="radio" name="radioItem" id="brush" value="brush" checked><label>Pincel</label><br>
			<input type="radio" name="radioItem" id="eraser" value="eraser"><label>Borracha</label><br>
			<input type="radio" name="radioItem" id="square" value="square"><label>Quadrado</label><BR>
			<input type="radio" name="radioItem" id="circle" value="circle"><label>Circulo</label><BR>
			<input type="radio" name="radioItem" id="rectangle" value="rectangle"><label>Retângulo</label>
		</form>

	<h3>Cor pincel</h3>
		<button onclick="changeColor('#ff0000')" class="btn btn-danger">Red</button>
		<button onclick="changeColor('#00ff00')" class="btn btn-success">Green</button>
		<button onclick="changeColor('#0000ff')" class="btn btn-primary">Blue</button>
		<button onclick="changeColor('#000000')" class="btn btn-dark">Black</button>

	<h3>Tamanho traço</h3>
		<input id="slider" type="range" min="1" max="50" value="25" class="slider" id="myRange">
		<output id="output"></output>
		<button onclick="changeLineSize()">Selecionar</button>
	
	<h3>Cor de fundo canvas</h3>
		<input id="inputColor" type="color" name="favcolor" value="#ff0000">
		<button onclick="changeBackgroundColorCanvas()" class="btn btn-dark">background</button>

  </body>
  <script type="text/javascript">
	/*
	OK a) desenho livre, com troca do tamanho do traço 
	b) desenho de pelo menos 3 formas geométricas, podendo escolher a cor da linha e de preenchimento e a largura da linha
	c) desenho de linhas, podendo escolher a cor da linha e a largura da mesma
 	OK d) troca de cores, tanto para o desenho quanto para o fundo
	OK e) borracha
	*/

	var canvas = document.getElementById("myCanvas");
	var ctx = canvas.getContext("2d");
	var slider = document.getElementById("#slider");
	var form = document.getElementById("radioGroup");
		
	var isPressed = false;
		
	//setup canvas
	ctx.lineCap  = "round";
	var startPointX = 0;
	var startPointY = 0;
	var colorBrush = "#000000";

	canvas.onmousedown = function(event){
		isPressed = true;
		
		switch(form.elements["radioItem"].value) {//which option is selected
			case "square":
				startPointX = event.offsetX;
				startPointY = event.offsetY;
				ctx.beginPath();
				ctx.strokeStyle = colorBrush;
				ctx.moveTo(startPointX, startPointY);
			break;
			
			case "circle":
				ctx.beginPath();
				ctx.strokeStyle = colorBrush;
				ctx.arc(event.offsetX, event.offsetY, 50, 0, 2 * Math.PI);
				ctx.stroke();
			break;
			
			case "rectangle":
				alert("rectangle");
			break;

			case "brush":
				ctx.strokeStyle = colorBrush;
				ctx.beginPath();
				ctx.moveTo(event.offsetX, event.offsetY);
			break;

			case "eraser":
				ctx.strokeStyle = "#ffffff";
				ctx.beginPath();
				ctx.moveTo(event.offsetX, event.offsetY);
			break;

			default:
				ctx.beginPath();
				ctx.moveTo(event.offsetX, event.offsetY);
			}
	}
	
	canvas.onmousemove = function(event){
		
		switch (form.elements["radioItem"].value) {//which option is selected
			case "square":
				
			break;
			
			case "circle":
				console.log("circle");
			break;
			
			case "rectangle":
				alert("rectangle");
			break;

			case "brush":
				if(isPressed){				
					ctx.strokeStyle = colorBrush;
					ctx.lineTo(event.offsetX, event.offsetY);
					ctx.stroke();	
				}
			break;

			case "eraser":
				if(isPressed){				
					ctx.strokeStyle = "#ffffff";
					ctx.lineTo(event.offsetX, event.offsetY);
					ctx.stroke();
				}
				//ctx.strokeStyle = eraser.colorEraser;
			break;
			
			default:
				
			}
	}

	canvas.onmouseup = function (event){
		isPressed = false;
		
		switch (form.elements["radioItem"].value) {//which option is selected
			case "square":
				var width = event.offsetX - startPointX;
				var height = event.offsetY - startPointY;
				ctx.strokeRect(startPointX, startPointY, width, height);
				ctx.beginPath();
			break;
			
			case "circle":
				//ctx.arc(100, 100, 50, 0, Math.PI * 2, true); // Círculo exterior
			break;
			
			case "rectangle":
				alert("rectangle");
			break;

			case "brush":
				//nothing
			break;

			case "eraser":
				//nothing
			break;

			default:
				
			}
		
	}

	function changeBackgroundColorCanvas(){
		var colorInput = document.getElementById("inputColor").value;
		canvas.style.backgroundColor = colorInput;
		eraser.colorEraser = colorInput;
	}

	function changeLineSize() {
		var val = document.getElementById("slider").value //gets the oninput value
		document.getElementById('output').innerHTML = val //displays this value to the html page
	   	ctx.lineWidth = val;
	}

	function changeColor(color){	
		colorBrush = color;
		ctx.strokeStyle = color;
	}

  </script>
</html> 